@using Microsoft.AspNetCore.Components.Routing
@using ManaApp.Services
@implements IDisposable

@inject AppState AppState

<div style="color:red">SIDEBAR LOADS</div>


@if (AppState.CurrentEmployee != null)

{
    <div class="app-sidebar sidebar-root">

        <div class="app-sidebar-title">SIA FMM</div>

        <nav class="app-nav">

            <NavLink class="app-nav-link" href="/products" Match="NavLinkMatch.All">
                Katalogs
            </NavLink>

            <NavLink class="app-nav-link" href="/planning">
                Plānošana
            </NavLink>

            <NavLink class="app-nav-link" href="/productiontasks-v2">
                Ražošanas plānošana
            </NavLink>

            @if (AppState.CurrentEmployee?.Role == "OFFICE")
                {
                    <NavLink class="app-nav-link" href="/production-priorities">
                        Ražošanas prioritātes
                    </NavLink>
                }


            <NavLink class="app-nav-link" href="/sales">
                Izdošana
            </NavLink>

            @if (AppState.CurrentEmployee?.Role == "WORKSHOP")
            {
                <NavLink class="app-nav-link" href="/employeetasks">
                    Darbinieku uzdevumi
                </NavLink>
            }

        </nav>
    </div>
}

@code {
    protected override void OnInitialized()
        => AppState.OnChange += StateHasChanged;

    public void Dispose()
        => AppState.OnChange -= StateHasChanged;
}
